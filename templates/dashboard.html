{% extends "base.html" %}
{% block content %}
<div class="container py-4">
  <h2>CRM Summary Dashboard</h2>
  <div class="row mb-4">
    <div class="col-md-6">
      <div class="p-3 bg-light rounded shadow-sm">
        <strong>Total Leads:</strong> {{ total }}
      </div>
    </div>
    <div class="col-md-6">
      <div class="p-3 bg-light rounded shadow-sm">
        <strong>Leads Closed:</strong> {{ closed }}
      </div>
    </div>
  </div>
  <canvas id="leadPieChart"></canvas>
  <script>
    const pieLabels = {{ pie_data.labels | tojson }};
    const pieValues = {{ pie_data.values | tojson }};
    new Chart(document.getElementById('leadPieChart'), {
      type: 'pie',
      data: {
        labels: pieLabels,
        datasets: [{
          label: "Lead Status",
          data: pieValues,
          backgroundColor: ["#4caf50", "#f44336"]
        }]
      }
    });
  </script>
</div>
{% endblock %}
